<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game Luy·ªán Chu·ªôt N√¢ng Cao</title>
<style>
  body {
    background: #111;
    color: white;
    text-align: center;
    font-family: Arial;
  }
  canvas {
    background: #222;
    cursor: crosshair;
  }
</style>
</head>
<body>

<h2>üéØ Game Luy·ªán Chu·ªôt ‚Äì Bong B√≥ng</h2>
<p>‚è± Th·ªùi gian: <span id="time">30</span>s | ‚≠ê ƒêi·ªÉm: <span id="score">0</span></p>

<canvas id="game" width="700" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");
const timeEl = document.getElementById("time");

let bubbles = [];
let score = 0;
let time = 30;
let gameOver = false;

function createBubble() {
  return {
    x: Math.random() * 650 + 25,
    y: 450,
    r: 20,
    speed: Math.random() * 2 + 2,
    life: 0
  };
}

function spawnBubbles() {
  let amount = Math.min(5, 1 + Math.floor(score / 5));
  for (let i = 0; i < amount; i++) {
    bubbles.push(createBubble());
  }
}

function update() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  bubbles.forEach((b, i) => {
    b.y -= b.speed;
    b.life++;

    // v·∫Ω bong b√≥ng
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
    ctx.fillStyle = "deepskyblue";
    ctx.fill();

    // qu√° th·ªùi gian th√¨ bi·∫øn m·∫•t
    if (b.life > 90) {
      bubbles.splice(i, 1);
    }
  });

  requestAnimationFrame(update);
}

canvas.addEventListener("click", e => {
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  bubbles.forEach((b, i) => {
    const dx = mx - b.x;
    const dy = my - b.y;
    if (Math.sqrt(dx*dx + dy*dy) < b.r) {
      score++;
      scoreEl.textContent = score;
      bubbles.splice(i, 1);
    }
  });
});

// t·∫°o bong b√≥ng li√™n t·ª•c
let spawn = setInterval(spawnBubbles, 800);

// ƒë·∫øm th·ªùi gian
let timer = setInterval(() => {
  time--;
  timeEl.textContent = time;
  if (time <= 0) {
    gameOver = true;
    clearInterval(timer);
    clearInterval(spawn);
    alert("H·∫øt gi·ªù! ƒêi·ªÉm c·ªßa b·∫°n: " + score);
  }
}, 1000);

update();
</script>

</body>
</html>
