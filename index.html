<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>T·ªï 3 ‚Äì L·ªõp 7A2</title>
<style>
body {
  margin: 0;
  background: #020617;
  color: white;
  font-family: Arial;
  text-align: center;
}
canvas {
  background: #1e293b;
  margin-top: 10px;
  border: 4px solid white;
}
#menu {
  margin-top: 50px;
}
button {
  margin: 5px;
  padding: 10px 15px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}
</style>
</head>
<body>

<div id="menu">
  <h2>üéÆ Ch·ªçn nh√¢n v·∫≠t (T·ªï 3)</h2>
</div>

<canvas id="game" width="800" height="500" style="display:none"></canvas>

<script>
const names = [
  "Huy","Qu·ª≥nh Ti√™n",
  "Giang","Ph√∫ Khang",
  "Tr.Ph∆∞∆°ng Anh","Duy",
  "Th·ªãnh","B·∫£o Anh",
  "Vinh","C∆∞·ªùng",
  "Tr√¢m"
];

const menu = document.getElementById("menu");
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

names.forEach(n => {
  const btn = document.createElement("button");
  btn.innerText = n;
  btn.onclick = () => startGame(n);
  menu.appendChild(btn);
});

let player = {
  x: 50,
  y: 250,
  size: 18,
  speed: 3,
  name: ""
};

const desks = [
  {x:200,y:80,left:"Huy",right:"Qu·ª≥nh Ti√™n"},
  {x:200,y:140,left:"Giang",right:"Ph√∫ Khang"},
  {x:200,y:200,left:"Tr.Ph∆∞∆°ng Anh",right:"Duy"},
  {x:200,y:260,left:"Th·ªãnh",right:"B·∫£o Anh"},
  {x:200,y:320,left:"Vinh",right:"C∆∞·ªùng"},
  {x:200,y:380,left:"",right:"Tr√¢m"},
];

let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function startGame(name){
  player.name = name;
  menu.style.display = "none";
  canvas.style.display = "block";
  loop();
}

function update(){
  if(keys["w"]||keys["ArrowUp"]) player.y -= player.speed;
  if(keys["s"]||keys["ArrowDown"]) player.y += player.speed;
  if(keys["a"]||keys["ArrowLeft"]) player.x -= player.speed;
  if(keys["d"]||keys["ArrowRight"]) player.x += player.speed;

  player.x = Math.max(0, Math.min(canvas.width-player.size, player.x));
  player.y = Math.max(0, Math.min(canvas.height-player.size, player.y));
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = "#334155";
  desks.forEach(d=>{
    ctx.fillRect(d.x, d.y, 180, 30);
    ctx.fillStyle = "white";
    ctx.fillText(d.left, d.x+10, d.y+20);
    ctx.fillText(d.right, d.x+100, d.y+20);
    ctx.fillStyle = "#334155";
  });

  ctx.fillStyle = "#2563eb";
  ctx.fillRect(player.x, player.y, player.size, player.size);
  ctx.fillStyle = "yellow";
  ctx.fillText(player.name, player.x-5, player.y-5);
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
</script>

</body>
</html>
